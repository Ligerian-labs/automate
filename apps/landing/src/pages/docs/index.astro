---
import "../../styles/global.css";
import DocsSearch from "../../components/DocsSearch.astro";
import Layout from "../../layouts/Layout.astro";
import { getDocsSearchEntries } from "../../lib/docs/content.js";

const searchEntries = getDocsSearchEntries();
const featuredPages = [
  {
    title: "Getting Started",
    description:
      "Create your first pipeline in 5 minutes. Install, configure, and run your first AI workflow.",
    href: "/docs/getting-started",
    cta: "Start building",
    icon: "rocket",
  },
  {
    title: "Pipeline Format",
    description:
      "YAML/JSON schema reference. Step types, variables, interpolation, conditions, and output delivery.",
    href: "/docs/pipeline-format",
    cta: "View reference",
    icon: "file",
  },
  {
    title: "API Reference",
    description:
      "REST API endpoints for pipelines, runs, schedules, templates, and user management.",
    href: "/docs/api-reference",
    cta: "Explore API",
    icon: "terminal",
  },
  {
    title: "Models & Pricing",
    description:
      "Supported models, token pricing, credit system, and cost estimation for your pipelines.",
    href: "/docs/models-pricing",
    cta: "View pricing",
    icon: "cpu",
  },
  {
    title: "Architecture",
    description:
      "Execution engine, worker flow, model router, cron scheduler, and infrastructure overview.",
    href: "/docs/architecture",
    cta: "Learn more",
    icon: "server",
  },
  {
    title: "Scheduling",
    description:
      "Cron expressions, timezone support, distributed locking, and automated pipeline triggers.",
    href: "/docs/api-reference#schedules",
    cta: "Set up schedules",
    icon: "timer",
  },
];

const quickLinks = [
  {
    label: "Pipeline YAML Schema",
    href: "/docs/pipeline-format#pipeline-definition",
    icon: "book",
  },
  {
    label: "Authentication & API Keys",
    href: "/docs/api-reference#authentication",
    icon: "key",
  },
  {
    label: "Variable Interpolation",
    href: "/docs/pipeline-format#variables",
    icon: "variable",
  },
  {
    label: "Webhooks & Triggers",
    href: "/docs/api-reference#webhooks",
    icon: "webhook",
  },
];
---

<Layout title="Documentation - stepIQ">
  <div class="landing">
    <a class="skip-link" href="#docs-main">Skip to main content</a>

    <header class="header" aria-label="Primary">
      <a href="/" class="brand">
        <span class="logo-icon" aria-hidden="true">
          <svg
            width="18"
            height="18"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <rect x="3" y="3" width="7" height="7" rx="1.5"></rect>
            <rect x="14" y="14" width="7" height="7" rx="1.5"></rect>
            <path d="M7 10v4a3 3 0 0 0 3 3h4"></path>
            <circle cx="17.5" cy="6.5" r="3.5"></circle>
          </svg>
        </span>
        stepIQ
      </a>
      <nav class="nav-links" aria-label="Main">
        <a href="/#features">Features</a>
        <a href="/#pricing">Pricing</a>
        <a href="/docs" aria-current="page">Docs</a>
        <a href="/#templates">Templates</a>
      </nav>
      <div class="actions">
        <a href="https://app.stepiq.sh" class="ghost-link">Log in</a>
        <a href="https://app.stepiq.sh" class="solid-link">Get Started</a>
      </div>
    </header>

    <main id="docs-main" tabindex="-1">
      <section class="hero" style="padding-bottom:3rem;">
        <p class="kicker">DOCUMENTATION</p>
        <div class="hero-text-wrap">
          <h1>Learn stepIQ</h1>
          <p class="hero-sub">Everything you need to build, run, and scale AI pipelines.</p>
        </div>
        <DocsSearch entries={searchEntries} />
      </section>

      <section class="section" style="padding-top:2rem;">
        <h2 style="margin-top:0;">Browse by category</h2>
        <div class="docs-card-grid docs-card-grid-hub">
          {featuredPages.map((page) => (
            <a href={page.href} class="docs-card" aria-label={`Open ${page.title} documentation`}>
              <span class="docs-card-icon" aria-hidden="true">
                {page.icon === "rocket" && <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4.5 16.5 3 21l4.5-1.5"/><path d="M15 3c4.5 0 6 1.5 6 6L10.5 19.5l-6-6Z"/><path d="m9 15 6-6"/></svg>}
                {page.icon === "file" && <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><path d="M14 2v6h6"/></svg>}
                {page.icon === "terminal" && <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 17 10 11 4 5"/><path d="M12 19h8"/></svg>}
                {page.icon === "cpu" && <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="4" y="4" width="16" height="16" rx="2"/><rect x="9" y="9" width="6" height="6"/><path d="M9 1v3M15 1v3M9 20v3M15 20v3M20 9h3M20 14h3M1 9h3M1 14h3"/></svg>}
                {page.icon === "server" && <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="6" rx="1"/><rect x="3" y="14" width="18" height="6" rx="1"/><path d="M7 7h.01M7 17h.01"/></svg>}
                {page.icon === "timer" && <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="13" r="8"/><path d="M12 9v4l2.5 1.5M9 3h6"/></svg>}
              </span>
              <h3>{page.title}</h3>
              <p>{page.description}</p>
              <span class="docs-card-link">{page.cta} →</span>
            </a>
          ))}
        </div>
      </section>

      <section class="section">
        <h2 style="margin-top:0;">Quick links</h2>
        <div class="docs-quick-grid">
          {quickLinks.map((item) => (
            <a href={item.href} class="docs-quick-link">
              <span aria-hidden="true">
                {item.icon === "book" && <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2Z"/></svg>}
                {item.icon === "key" && <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="7.5" cy="15.5" r="5.5"/><path d="m21 2-9.6 9.6M15 5l4 4"/></svg>}
                {item.icon === "variable" && <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M8 3H5a2 2 0 0 0-2 2v3m0 8v3a2 2 0 0 0 2 2h3M16 3h3a2 2 0 0 1 2 2v3m0 8v3a2 2 0 0 1-2 2h-3M9 9l6 6m0-6-6 6"/></svg>}
                {item.icon === "webhook" && <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10 14a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07L12 6"/><path d="M14 10a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07L12 18"/></svg>}
              </span>
              {item.label}
            </a>
          ))}
        </div>
      </section>
    </main>

    <footer class="footer">
      <div class="footer-top">
        <div class="footer-brand">
          <div class="footer-logo-row">
            <span class="logo-icon" style="width:1.75rem;height:1.75rem;" aria-hidden="true">
              <svg
                width="18"
                height="18"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <rect x="3" y="3" width="7" height="7" rx="1.5"></rect>
                <rect x="14" y="14" width="7" height="7" rx="1.5"></rect>
                <path d="M7 10v4a3 3 0 0 0 3 3h4"></path>
                <circle cx="17.5" cy="6.5" r="3.5"></circle>
              </svg>
            </span>
            <span class="brand-name">stepIQ</span>
          </div>
          <p class="footer-tagline">Zapier for AI — AI-native, server-side, and model-agnostic.</p>
        </div>
        <div class="footer-links">
          <div class="footer-col">
            <h4>Product</h4>
            <a href="/#features">Features</a>
            <a href="/#pricing">Pricing</a>
            <a href="/#templates">Templates</a>
            <span aria-disabled="true">Changelog</span>
          </div>
          <div class="footer-col">
            <h4>Developers</h4>
            <a href="/docs">Documentation</a>
            <a href="/docs/api-reference">API Reference</a>
            <span aria-disabled="true">Status</span>
            <a href="https://github.com/Ligerian-labs/automate">GitHub</a>
          </div>
          <div class="footer-col">
            <h4>Company</h4>
            <span aria-disabled="true">About</span>
            <span aria-disabled="true">Blog</span>
            <a href="/privacy">Privacy</a>
            <a href="/terms">Terms</a>
          </div>
        </div>
      </div>
      <div class="footer-divider"></div>
      <div class="footer-bottom">
        <p class="footer-copy">2026 Ligerian Labs. All rights reserved.</p>
        <div class="footer-social" aria-label="Social links">
          <a href="https://github.com/Ligerian-labs/automate" aria-label="GitHub">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.9a3.4 3.4 0 0 0-.9-2.6c3-.3 6.1-1.5 6.1-6.7a5.2 5.2 0 0 0-1.4-3.6A4.8 4.8 0 0 0 19.7 2S18.6 1.7 16 3.5a13.3 13.3 0 0 0-7 0C6.4 1.7 5.3 2 5.3 2a4.8 4.8 0 0 0-.1 3.2 5.2 5.2 0 0 0-1.4 3.6c0 5.2 3.1 6.4 6.1 6.7a3.4 3.4 0 0 0-1 2.6V22"></path>
            </svg>
          </a>
          <a href="https://x.com" aria-label="Twitter">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="m4 4 16 16"></path>
              <path d="M20 4 4 20"></path>
            </svg>
          </a>
          <a href="https://linkedin.com" aria-label="LinkedIn">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path>
              <rect x="2" y="9" width="4" height="12"></rect>
              <circle cx="4" cy="4" r="2"></circle>
            </svg>
          </a>
        </div>
      </div>
    </footer>
  </div>
</Layout>
