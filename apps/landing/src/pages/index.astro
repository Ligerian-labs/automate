---
import Layout from "../layouts/Layout.astro";

const APP_URL = import.meta.env.PUBLIC_APP_URL || "http://localhost:5173";

const howItWorks = [
  {
    step: "01",
    title: "Define",
    description: "Write your pipeline in YAML or JSON. Chain models, set variables, configure retries and output formats.",
  },
  {
    step: "02",
    title: "Run",
    description: "Trigger manually, via API, cron, or webhook. Steps execute in sequence with real-time streaming.",
  },
  {
    step: "03",
    title: "Deliver",
    description: "Output goes where you need it ‚Äî webhooks, email, API response. Track cost and tokens per step.",
  },
];

const coreFeatures = [
  {
    icon: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"/><path d="M12 1v6m0 6v6m-7-7h6m6 0h6"/><path d="M19.07 4.93l-4.24 4.24M9.17 14.83l-4.24 4.24M4.93 4.93l4.24 4.24M14.83 14.83l4.24 4.24"/></svg>`,
    title: "Model-agnostic",
    desc: "Mix Claude, GPT-4o, Llama and more in a single pipeline. Each step picks the best model for the job.",
  },
  {
    icon: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"/></svg>`,
    title: "Variable interpolation",
    desc: "Reference previous outputs, user inputs, secrets, and pipeline metadata with Handlebars-like syntax.",
  },
  {
    icon: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="1 4 1 10 7 10"/><path d="M3.51 15a9 9 0 105.69-9.51L1 10"/></svg>`,
    title: "Retries & conditions",
    desc: "Built-in retry with backoff. Conditional branching lets you loop or skip steps based on output quality.",
  },
  {
    icon: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>`,
    title: "Cron scheduling",
    desc: "Schedule pipelines with cron expressions. Timezone-aware, with distributed locking for reliability.",
  },
];

const secondaryFeatures = [
  {
    icon: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7z"/><circle cx="12" cy="12" r="3"/></svg>`,
    title: "Real-time streaming",
    desc: "Watch each step execute live via SSE. See token counts, costs, and outputs as they stream in.",
  },
  {
    icon: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0110 0v4"/></svg>`,
    title: "Encrypted secrets",
    desc: "Store API keys and tokens with AES-256-GCM encryption. Reference them safely in prompts via {{env.xxx}}.",
  },
  {
    icon: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/></svg>`,
    title: "YAML import/export",
    desc: "Define pipelines in YAML or JSON. Import, export, and version control your workflows alongside your code.",
  },
  {
    icon: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="1" x2="12" y2="23"/><path d="M17 5H9.5a3.5 3.5 0 000 7h5a3.5 3.5 0 010 7H6"/></svg>`,
    title: "Cost tracking",
    desc: "Per-step token counts and costs. Get estimates before running. No surprise bills.",
  },
  {
    icon: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"/></svg>`,
    title: "API & webhooks",
    desc: "Trigger pipelines programmatically. Unique webhook URLs per pipeline. Full REST API with scoped keys.",
  },
  {
    icon: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 20h9"/><path d="M16.5 3.5a2.121 2.121 0 013 3L7 19l-4 1 1-4L16.5 3.5z"/></svg>`,
    title: "Version history",
    desc: "Every edit creates an immutable snapshot. Roll back to any version. Compare definitions side by side.",
  },
];

const pricing = [
  {
    name: "Free",
    price: "‚Ç¨0",
    period: "/month",
    caption: "100 credits included",
    items: ["3 pipelines", "5 steps per pipeline", "10 runs/day", "Community models", "Run history"],
    cta: "Get started",
    featured: false,
  },
  {
    name: "Pro",
    price: "‚Ç¨49",
    period: "/month",
    caption: "8,000 credits included",
    items: ["Unlimited pipelines", "20 steps per pipeline", "500 runs/day", "All models", "Cron scheduling", "Webhooks & API access", "Priority execution"],
    cta: "Start free trial",
    featured: true,
  },
  {
    name: "Enterprise",
    price: "Custom",
    period: "",
    caption: "Custom credit allocation",
    items: ["Everything in Pro", "SSO / SAML", "Dedicated workers", "SLA guarantee", "Custom model endpoints", "Priority support"],
    cta: "Contact sales",
    featured: false,
  },
];

const pipelineSteps = [
  { icon: "üîç", title: "Research", model: "claude-sonnet-4", active: true, progress: 100 },
  { icon: "üí°", title: "Pick Topic", model: "gpt-4o", active: true, progress: 70 },
  { icon: "‚úçÔ∏è", title: "Write Draft", model: "claude-sonnet-4", active: false, progress: 0 },
  { icon: "‚úÖ", title: "Quality Review", model: "claude-sonnet-4", active: false, progress: 0 },
];

const codeContent = `name: weekly-blog-generator
version: 1

variables:
  language: "fr"
  tone: "direct, pragmatic"

steps:
  - id: research
    model: claude-sonnet-4
    output_format: json
    retry:
      max_attempts: 2

  - id: write_draft
    model: claude-sonnet-4
    output_format: markdown`;
---

<Layout title="Stepiq ‚Äî Build AI pipelines. Ship without infrastructure.">
  <main class="landing">
    <header class="header">
      <div class="brand">
        <div class="logo-icon">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="8" height="8" rx="2"/><rect x="13" y="3" width="8" height="8" rx="2"/><rect x="3" y="13" width="8" height="8" rx="2"/><rect x="13" y="13" width="8" height="8" rx="2"/></svg>
        </div>
        <span>Stepiq</span>
      </div>
      <nav class="nav-links">
        <a href="#features">Features</a>
        <a href="#pricing">Pricing</a>
        <a href="#docs">Docs</a>
        <a href="#templates">Templates</a>
      </nav>
      <div class="actions">
        <a href={`${APP_URL}/login`} class="ghost-link">Log in</a>
        <a href={`${APP_URL}/register`} class="solid-link">Get Started</a>
      </div>
    </header>

    <section class="hero">
      <div class="beta-badge"><span class="dot"></span> Now in public beta</div>
      <div class="hero-text-wrap">
        <h1>Build AI pipelines.<br />Ship without infrastructure.</h1>
        <p class="hero-sub">
          Chain models, prompts and logic into multi-step workflows.<br />
          Trigger via API, cron, or one click. No servers needed.
        </p>
      </div>
      <div class="hero-actions">
        <a href={`${APP_URL}/register`} class="solid-link">Start building free <span class="arrow-icon">‚Üí</span></a>
        <a href="#docs" class="outline-link">View documentation</a>
      </div>

      <article class="pipeline-mockup" id="docs">
        <div class="mock-head">
          <strong class="mock-title">weekly-blog-generator</strong>
          <span class="status"><span class="status-dot"></span> Running</span>
        </div>
        <div class="steps">
          {pipelineSteps.map((step, i) => (
            <>
              {i > 0 && <div class="arrow">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
              </div>}
              <div class={`step ${step.active ? 'step-active' : 'step-pending'}`}>
                <span class="step-icon">{step.icon}</span>
                <span class="step-title">{step.title}</span>
                <span class="step-model">{step.model}</span>
                <div class="step-bar">
                  <div class={`step-bar-fill ${step.active ? 'bar-accent' : 'bar-muted'}`} style={`width: ${step.active ? step.progress + '%' : '0%'}`}></div>
                </div>
              </div>
            </>
          ))}
        </div>
      </article>

      <div class="trust">
        <span class="trust-label">Works with</span>
        <span class="trust-sep"></span>
        <span>Anthropic</span>
        <span>OpenAI</span>
        <span>Meta Llama</span>
        <span>Mistral</span>
      </div>
    </section>

    <section class="section">
      <div class="section-header">
        <p class="kicker">HOW IT WORKS</p>
        <h2>From YAML to production<br />in three steps</h2>
        <p class="section-sub">Define your pipeline as code. We handle execution, retries, scheduling, and delivery.</p>
      </div>
      <div class="card-grid three">
        {howItWorks.map((item) => (
          <article class="card">
            <div class="step-pill">{item.step}</div>
            <h3>{item.title}</h3>
            <p>{item.description}</p>
          </article>
        ))}
      </div>
    </section>

    <section class="section" id="features">
      <div class="section-header">
        <p class="kicker">PIPELINE AS CODE</p>
        <h2>Everything you need to<br />orchestrate AI workflows</h2>
      </div>
      <div class="features-layout">
        <div class="code-card">
          <div class="code-header">
            <div class="code-dots">
              <span class="code-dot red"></span>
              <span class="code-dot yellow"></span>
              <span class="code-dot green"></span>
            </div>
            <span class="code-filename">pipeline.yaml</span>
          </div>
          <pre class="code-body"><code set:html={codeContent
            .replace(/&/g, '&amp;')
            .replace(/</g, '&lt;')
            .replace(/>/g, '&gt;')
            .replace(/^(name|version|variables|steps):/gm, '<span class="hl-key">$&</span>')
            .replace(/(\s+)(retry:)/gm, '$1<span class="hl-key">$2</span>')
          } /></pre>
        </div>
        <div class="feat-cards">
          {coreFeatures.map((feat) => (
            <article class="card feat-card">
              <div class="feat-icon" set:html={feat.icon} />
              <h3>{feat.title}</h3>
              <p>{feat.desc}</p>
            </article>
          ))}
        </div>
      </div>
    </section>

    <section class="section" id="secondary-features">
      <div class="section-header">
        <p class="kicker">FEATURES</p>
        <h2>Built for production</h2>
        <p class="section-sub">Everything beyond the basics to run AI workflows at scale.</p>
      </div>
      <div class="card-grid three">
        {secondaryFeatures.map((feat) => (
          <article class="card feat-card">
            <div class="feat-icon" set:html={feat.icon} />
            <h3>{feat.title}</h3>
            <p>{feat.desc}</p>
          </article>
        ))}
      </div>
    </section>

    <section class="section" id="pricing">
      <div class="section-header">
        <p class="kicker">PRICING</p>
        <h2>Start free, scale as you grow</h2>
        <p class="section-sub">100 free credits to start. No credit card required.</p>
      </div>
      <div class="card-grid three">
        {pricing.map((plan) => (
          <article class={`card pricing-card ${plan.featured ? "featured" : ""}`}>
            {plan.featured && <div class="popular-badge">MOST POPULAR</div>}
            <h3>{plan.name}</h3>
            <div class="price-row">
              <span class="price">{plan.price}</span>
              {plan.period && <span class="price-period">{plan.period}</span>}
            </div>
            <p class="price-caption">{plan.caption}</p>
            <div class="price-sep"></div>
            <ul>
              {plan.items.map((item) => (
                <li>{item}</li>
              ))}
            </ul>
            <a href={`${APP_URL}/register`} class={plan.featured ? "solid-link" : "outline-link"}>{plan.cta}</a>
          </article>
        ))}
      </div>
    </section>

    <footer class="footer">
      <div class="footer-top">
        <div class="footer-brand">
          <div class="footer-logo-row">
            <div class="logo-icon">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="8" height="8" rx="2"/><rect x="13" y="3" width="8" height="8" rx="2"/><rect x="3" y="13" width="8" height="8" rx="2"/><rect x="13" y="13" width="8" height="8" rx="2"/></svg>
            </div>
            <span class="brand-name">Stepiq</span>
          </div>
          <p class="footer-tagline">Zapier for AI ‚Äî AI-native, server-side,<br />and model-agnostic.</p>
        </div>
        <div class="footer-links">
          <div class="footer-col">
            <h4>Product</h4>
            <a href="#features">Features</a>
            <a href="#pricing">Pricing</a>
            <a href="#templates">Templates</a>
            <a href="#">Changelog</a>
          </div>
          <div class="footer-col">
            <h4>Developers</h4>
            <a href="#">Documentation</a>
            <a href="#">API Reference</a>
            <a href="#">Status</a>
            <a href="#">GitHub</a>
          </div>
          <div class="footer-col">
            <h4>Company</h4>
            <a href="#">About</a>
            <a href="#">Blog</a>
            <a href="#">Privacy</a>
            <a href="#">Terms</a>
          </div>
        </div>
      </div>
      <div class="footer-divider"></div>
      <div class="footer-bottom">
        <p class="footer-copy">¬© 2026 Ligerian Labs. All rights reserved.</p>
        <div class="footer-social">
          <a href="#" aria-label="GitHub">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"/></svg>
          </a>
          <a href="#" aria-label="X / Twitter">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
          </a>
          <a href="#" aria-label="LinkedIn">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 01-2.063-2.065 2.064 2.064 0 112.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
          </a>
        </div>
      </div>
    </footer>
  </main>
</Layout>
